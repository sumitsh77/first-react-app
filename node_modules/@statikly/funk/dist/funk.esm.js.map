{"version":3,"file":"funk.esm.js","sources":["../src/Tabs.tsx"],"sourcesContent":["import React, {\r\n  createContext,\r\n  useCallback,\r\n  useContext,\r\n  useEffect,\r\n  useMemo,\r\n  useRef,\r\n  useState,\r\n} from 'react'\r\n\r\nimport { useUID } from 'react-uid'\r\n\r\nenum Direction {\r\n  HORIZONTAL,\r\n  VERTICAL,\r\n}\r\n\r\ninterface TabContextValue {\r\n  id: string\r\n  activeTab: number\r\n  numTabs: number\r\n  setActiveTab(tab: number): void\r\n  direction: Direction\r\n}\r\n\r\nlet TabContext = createContext<TabContextValue>({\r\n  id: 'Please provide a unique id',\r\n  activeTab: 0,\r\n  numTabs: 0,\r\n  setActiveTab: () => {},\r\n  direction: Direction.HORIZONTAL,\r\n})\r\n\r\nexport function useTab(index: number) {\r\n  let { activeTab } = useContext(TabContext)\r\n\r\n  return {\r\n    isActive: activeTab === index,\r\n  }\r\n}\r\n\r\ninterface TabGroupProps {\r\n  initialActiveTab?: number\r\n  numTabs: number\r\n  children: React.ReactNode\r\n  direction?: Direction\r\n}\r\n\r\nexport function TabGroup({\r\n  initialActiveTab = 0,\r\n  numTabs,\r\n  direction = Direction.HORIZONTAL,\r\n  children,\r\n}: TabGroupProps) {\r\n  let id = useUID()\r\n  let [activeTab, setActiveTab] = useState(initialActiveTab)\r\n\r\n  let value = useMemo(\r\n    () => ({ id, activeTab, setActiveTab, numTabs, direction }),\r\n    [activeTab, setActiveTab, numTabs, direction, id]\r\n  )\r\n\r\n  return <TabContext.Provider value={value}>{children}</TabContext.Provider>\r\n}\r\n\r\ninterface TabProps {\r\n  index: number\r\n  className: string\r\n  activeClassName: string\r\n  inactiveClassName: string\r\n  trigger?: 'click' | 'hover' | 'none'\r\n  children?: React.ReactNode\r\n  [key: string]: any\r\n}\r\n\r\nexport function Tab({\r\n  index,\r\n  className,\r\n  activeClassName,\r\n  inactiveClassName,\r\n  trigger = 'click',\r\n  ...props\r\n}: TabProps) {\r\n  let { id, activeTab, setActiveTab } = useContext(TabContext)\r\n  let tabRef = useRef<HTMLButtonElement>()\r\n\r\n  useEffect(() => {\r\n    if (activeTab === index) {\r\n      tabRef.current?.focus({ preventScroll: true })\r\n    }\r\n  }, [activeTab, index])\r\n\r\n  let calculatedClassName = useMemo(() => {\r\n    return [\r\n      className,\r\n      activeTab === index ? activeClassName : inactiveClassName,\r\n    ].join(' ')\r\n  }, [className, activeClassName, inactiveClassName, activeTab, index])\r\n\r\n  let interactionProps = useMemo(() => {\r\n    let interactions: any = {}\r\n\r\n    interactions.onClick = () => setActiveTab(index)\r\n\r\n    if (trigger === 'hover') {\r\n      interactions.onMouseEnter = () => setActiveTab(index)\r\n    }\r\n\r\n    return interactions\r\n  }, [trigger, setActiveTab, index])\r\n\r\n  return (\r\n    <button\r\n      ref={tabRef}\r\n      role=\"tab\"\r\n      aria-controls={`${id}-${index}`}\r\n      aria-selected={activeTab === index}\r\n      tabIndex={activeTab === index ? 0 : -1}\r\n      className={calculatedClassName}\r\n      {...interactionProps}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\ntype HTMLTags = keyof JSX.IntrinsicElements\r\n\r\ninterface TabPanelProps {\r\n  as?: HTMLTags\r\n  index: number\r\n  className: string\r\n  activeClassName: string\r\n  inactiveClassName: string\r\n  children?: React.ReactNode\r\n  [key: string]: any\r\n}\r\n\r\nexport function TabPanel({\r\n  as: Component = 'div',\r\n  index,\r\n  className,\r\n  activeClassName,\r\n  inactiveClassName,\r\n  ...props\r\n}: TabPanelProps) {\r\n  let { id, activeTab } = useContext(TabContext)\r\n\r\n  let calculatedClassName = useMemo(() => {\r\n    return [\r\n      className,\r\n      activeTab === index ? activeClassName : inactiveClassName,\r\n    ].join(' ')\r\n  }, [className, activeClassName, inactiveClassName, activeTab, index])\r\n\r\n  return (\r\n    <Component\r\n      style={{\r\n        ...props.style,\r\n        visibility: activeTab === index ? 'visible' : 'hidden',\r\n      }}\r\n      id={`${id}-${index}`}\r\n      role=\"tabpanel\"\r\n      className={calculatedClassName}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\ninterface TabListProps {\r\n  as?: HTMLTags\r\n  children?: React.ReactNode\r\n  [key: string]: any\r\n}\r\n\r\nexport function TabList({ as: Component = 'div', ...props }: TabListProps) {\r\n  let tabListRef = useRef<any>()\r\n  let { setActiveTab, numTabs, activeTab, direction } = useContext(TabContext)\r\n\r\n  let handleKeyUp = useCallback(\r\n    (e: KeyboardEvent) => {\r\n      let actions: Record<string, () => void> = {\r\n        End: () => {\r\n          setActiveTab(numTabs - 1)\r\n        },\r\n        Home: () => {\r\n          setActiveTab(0)\r\n        },\r\n      }\r\n\r\n      if (direction === Direction.HORIZONTAL) {\r\n        actions.ArrowLeft = () => {\r\n          let previous = activeTab - 1 >= 0 ? activeTab - 1 : numTabs - 1\r\n          setActiveTab(previous)\r\n        }\r\n\r\n        actions.ArrowRight = () => {\r\n          let next = activeTab + 1 < numTabs ? activeTab + 1 : 0\r\n          setActiveTab(next)\r\n        }\r\n      }\r\n\r\n      if (direction === Direction.VERTICAL) {\r\n        actions.ArrowUp = () => {\r\n          let previous = activeTab - 1 >= 0 ? activeTab - 1 : numTabs - 1\r\n          setActiveTab(previous)\r\n        }\r\n\r\n        actions.ArrowDown = () => {\r\n          let next = activeTab + 1 < numTabs ? activeTab + 1 : 0\r\n          setActiveTab(next)\r\n        }\r\n      }\r\n\r\n      let action = actions[e.key]\r\n\r\n      if (action) {\r\n        e.preventDefault()\r\n        action()\r\n      }\r\n    },\r\n    [setActiveTab, activeTab, numTabs, direction]\r\n  )\r\n\r\n  useEffect(() => {\r\n    tabListRef.current.addEventListener('keyup', handleKeyUp)\r\n\r\n    return () => tabListRef.current.removeEventListener('keyup', handleKeyUp)\r\n  }, [handleKeyUp])\r\n\r\n  // @ts-ignore\r\n  return <Component ref={tabListRef} role=\"tablist\" {...props} />\r\n}\r\n\r\nTabGroup.Tab = Tab\r\nTabGroup.TabPanel = TabPanel\r\nTabGroup.TabList = TabList\r\nTabGroup.useTab = useTab\r\n\r\nTabGroup.direction = Direction\r\n"],"names":["Direction","TabContext","createContext","id","activeTab","numTabs","setActiveTab","direction","HORIZONTAL","useTab","index","useContext","isActive","TabGroup","initialActiveTab","children","useUID","useState","value","useMemo","React","Provider","Tab","className","activeClassName","inactiveClassName","trigger","props","tabRef","useRef","useEffect","current","focus","preventScroll","calculatedClassName","join","interactionProps","interactions","onClick","onMouseEnter","ref","role","tabIndex","TabPanel","as","Component","style","visibility","TabList","tabListRef","handleKeyUp","useCallback","e","actions","End","Home","ArrowLeft","previous","ArrowRight","next","VERTICAL","ArrowUp","ArrowDown","action","key","preventDefault","addEventListener","removeEventListener"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAYA,IAAKA,SAAL;;AAAA,WAAKA;AACHA,EAAAA,sCAAA,eAAA;AACAA,EAAAA,oCAAA,aAAA;AACD,CAHD,EAAKA,SAAS,KAATA,SAAS,KAAA,CAAd;;AAaA,IAAIC,UAAU,gBAAGC,aAAa,CAAkB;AAC9CC,EAAAA,EAAE,EAAE,4BAD0C;AAE9CC,EAAAA,SAAS,EAAE,CAFmC;AAG9CC,EAAAA,OAAO,EAAE,CAHqC;AAI9CC,EAAAA,YAAY,EAAE,0BAJgC;AAK9CC,EAAAA,SAAS,EAAEP,SAAS,CAACQ;AALyB,CAAlB,CAA9B;SAQgBC,OAAOC;oBACDC,UAAU,CAACV,UAAD;MAAxBG,wBAAAA;;AAEN,SAAO;AACLQ,IAAAA,QAAQ,EAAER,SAAS,KAAKM;AADnB,GAAP;AAGD;SASeG;mCACdC;MAAAA,sDAAmB;MACnBT,eAAAA;4BACAE;MAAAA,wCAAYP,SAAS,CAACQ;MACtBO,gBAAAA;AAEA,MAAIZ,EAAE,GAAGa,MAAM,EAAf;;kBACgCC,QAAQ,CAACH,gBAAD;MAAnCV;MAAWE;;AAEhB,MAAIY,KAAK,GAAGC,OAAO,CACjB;AAAA,WAAO;AAAEhB,MAAAA,EAAE,EAAFA,EAAF;AAAMC,MAAAA,SAAS,EAATA,SAAN;AAAiBE,MAAAA,YAAY,EAAZA,YAAjB;AAA+BD,MAAAA,OAAO,EAAPA,OAA/B;AAAwCE,MAAAA,SAAS,EAATA;AAAxC,KAAP;AAAA,GADiB,EAEjB,CAACH,SAAD,EAAYE,YAAZ,EAA0BD,OAA1B,EAAmCE,SAAnC,EAA8CJ,EAA9C,CAFiB,CAAnB;AAKA,SAAOiB,mBAAA,CAACnB,UAAU,CAACoB,QAAZ;AAAqBH,IAAAA,KAAK,EAAEA;GAA5B,EAAoCH,QAApC,CAAP;AACD;SAYeO;MACdZ,cAAAA;MACAa,kBAAAA;MACAC,wBAAAA;MACAC,0BAAAA;4BACAC;MAAAA,qCAAU;MACPC;;qBAEmChB,UAAU,CAACV,UAAD;MAA1CE,kBAAAA;MAAIC,yBAAAA;MAAWE,4BAAAA;;AACrB,MAAIsB,MAAM,GAAGC,MAAM,EAAnB;AAEAC,EAAAA,SAAS,CAAC;AACR,QAAI1B,SAAS,KAAKM,KAAlB,EAAyB;AAAA;;AACvB,yBAAAkB,MAAM,CAACG,OAAP,qCAAgBC,KAAhB,CAAsB;AAAEC,QAAAA,aAAa,EAAE;AAAjB,OAAtB;AACD;AACF,GAJQ,EAIN,CAAC7B,SAAD,EAAYM,KAAZ,CAJM,CAAT;AAMA,MAAIwB,mBAAmB,GAAGf,OAAO,CAAC;AAChC,WAAO,CACLI,SADK,EAELnB,SAAS,KAAKM,KAAd,GAAsBc,eAAtB,GAAwCC,iBAFnC,EAGLU,IAHK,CAGA,GAHA,CAAP;AAID,GALgC,EAK9B,CAACZ,SAAD,EAAYC,eAAZ,EAA6BC,iBAA7B,EAAgDrB,SAAhD,EAA2DM,KAA3D,CAL8B,CAAjC;AAOA,MAAI0B,gBAAgB,GAAGjB,OAAO,CAAC;AAC7B,QAAIkB,YAAY,GAAQ,EAAxB;;AAEAA,IAAAA,YAAY,CAACC,OAAb,GAAuB;AAAA,aAAMhC,YAAY,CAACI,KAAD,CAAlB;AAAA,KAAvB;;AAEA,QAAIgB,OAAO,KAAK,OAAhB,EAAyB;AACvBW,MAAAA,YAAY,CAACE,YAAb,GAA4B;AAAA,eAAMjC,YAAY,CAACI,KAAD,CAAlB;AAAA,OAA5B;AACD;;AAED,WAAO2B,YAAP;AACD,GAV6B,EAU3B,CAACX,OAAD,EAAUpB,YAAV,EAAwBI,KAAxB,CAV2B,CAA9B;AAYA,SACEU,mBAAA,SAAA;AACEoB,IAAAA,GAAG,EAAEZ;AACLa,IAAAA,IAAI,EAAC;qBACatC,WAAMO;qBACTN,SAAS,KAAKM;AAC7BgC,IAAAA,QAAQ,EAAEtC,SAAS,KAAKM,KAAd,GAAsB,CAAtB,GAA0B,CAAC;AACrCa,IAAAA,SAAS,EAAEW;KACPE,kBACAT,MARN,CADF;AAYD;SAcegB;uBACdC;MAAIC,kCAAY;MAChBnC,cAAAA;MACAa,kBAAAA;MACAC,wBAAAA;MACAC,0BAAAA;MACGE;;qBAEqBhB,UAAU,CAACV,UAAD;MAA5BE,kBAAAA;MAAIC,yBAAAA;;AAEV,MAAI8B,mBAAmB,GAAGf,OAAO,CAAC;AAChC,WAAO,CACLI,SADK,EAELnB,SAAS,KAAKM,KAAd,GAAsBc,eAAtB,GAAwCC,iBAFnC,EAGLU,IAHK,CAGA,GAHA,CAAP;AAID,GALgC,EAK9B,CAACZ,SAAD,EAAYC,eAAZ,EAA6BC,iBAA7B,EAAgDrB,SAAhD,EAA2DM,KAA3D,CAL8B,CAAjC;AAOA,SACEU,mBAAA,CAACyB,SAAD;AACEC,IAAAA,KAAK,eACAnB,KAAK,CAACmB,KADN;AAEHC,MAAAA,UAAU,EAAE3C,SAAS,KAAKM,KAAd,GAAsB,SAAtB,GAAkC;AAF3C;AAILP,IAAAA,EAAE,EAAKA,EAAL,SAAWO;AACb+B,IAAAA,IAAI,EAAC;AACLlB,IAAAA,SAAS,EAAEW;KACPP,MARN,CADF;AAYD;SAQeqB;uBAAUJ;MAAIC,kCAAY;MAAUlB;;AAClD,MAAIsB,UAAU,GAAGpB,MAAM,EAAvB;;qBACsDlB,UAAU,CAACV,UAAD;MAA1DK,4BAAAA;MAAcD,uBAAAA;MAASD,yBAAAA;MAAWG,yBAAAA;;AAExC,MAAI2C,WAAW,GAAGC,WAAW,CAC3B,UAACC,CAAD;AACE,QAAIC,OAAO,GAA+B;AACxCC,MAAAA,GAAG,EAAE;AACHhD,QAAAA,YAAY,CAACD,OAAO,GAAG,CAAX,CAAZ;AACD,OAHuC;AAIxCkD,MAAAA,IAAI,EAAE;AACJjD,QAAAA,YAAY,CAAC,CAAD,CAAZ;AACD;AANuC,KAA1C;;AASA,QAAIC,SAAS,KAAKP,SAAS,CAACQ,UAA5B,EAAwC;AACtC6C,MAAAA,OAAO,CAACG,SAAR,GAAoB;AAClB,YAAIC,QAAQ,GAAGrD,SAAS,GAAG,CAAZ,IAAiB,CAAjB,GAAqBA,SAAS,GAAG,CAAjC,GAAqCC,OAAO,GAAG,CAA9D;AACAC,QAAAA,YAAY,CAACmD,QAAD,CAAZ;AACD,OAHD;;AAKAJ,MAAAA,OAAO,CAACK,UAAR,GAAqB;AACnB,YAAIC,IAAI,GAAGvD,SAAS,GAAG,CAAZ,GAAgBC,OAAhB,GAA0BD,SAAS,GAAG,CAAtC,GAA0C,CAArD;AACAE,QAAAA,YAAY,CAACqD,IAAD,CAAZ;AACD,OAHD;AAID;;AAED,QAAIpD,SAAS,KAAKP,SAAS,CAAC4D,QAA5B,EAAsC;AACpCP,MAAAA,OAAO,CAACQ,OAAR,GAAkB;AAChB,YAAIJ,QAAQ,GAAGrD,SAAS,GAAG,CAAZ,IAAiB,CAAjB,GAAqBA,SAAS,GAAG,CAAjC,GAAqCC,OAAO,GAAG,CAA9D;AACAC,QAAAA,YAAY,CAACmD,QAAD,CAAZ;AACD,OAHD;;AAKAJ,MAAAA,OAAO,CAACS,SAAR,GAAoB;AAClB,YAAIH,IAAI,GAAGvD,SAAS,GAAG,CAAZ,GAAgBC,OAAhB,GAA0BD,SAAS,GAAG,CAAtC,GAA0C,CAArD;AACAE,QAAAA,YAAY,CAACqD,IAAD,CAAZ;AACD,OAHD;AAID;;AAED,QAAII,MAAM,GAAGV,OAAO,CAACD,CAAC,CAACY,GAAH,CAApB;;AAEA,QAAID,MAAJ,EAAY;AACVX,MAAAA,CAAC,CAACa,cAAF;AACAF,MAAAA,MAAM;AACP;AACF,GAzC0B,EA0C3B,CAACzD,YAAD,EAAeF,SAAf,EAA0BC,OAA1B,EAAmCE,SAAnC,CA1C2B,CAA7B;AA6CAuB,EAAAA,SAAS,CAAC;AACRmB,IAAAA,UAAU,CAAClB,OAAX,CAAmBmC,gBAAnB,CAAoC,OAApC,EAA6ChB,WAA7C;AAEA,WAAO;AAAA,aAAMD,UAAU,CAAClB,OAAX,CAAmBoC,mBAAnB,CAAuC,OAAvC,EAAgDjB,WAAhD,CAAN;AAAA,KAAP;AACD,GAJQ,EAIN,CAACA,WAAD,CAJM,CAAT;;AAOA,SAAO9B,mBAAA,CAACyB,SAAD;AAAWL,IAAAA,GAAG,EAAES;AAAYR,IAAAA,IAAI,EAAC;KAAcd,MAA/C,CAAP;AACD;AAEDd,QAAQ,CAACS,GAAT,GAAeA,GAAf;AACAT,QAAQ,CAAC8B,QAAT,GAAoBA,QAApB;AACA9B,QAAQ,CAACmC,OAAT,GAAmBA,OAAnB;AACAnC,QAAQ,CAACJ,MAAT,GAAkBA,MAAlB;AAEAI,QAAQ,CAACN,SAAT,GAAqBP,SAArB;;;;"}