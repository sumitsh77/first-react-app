{"version":3,"file":"funk.cjs.production.min.js","sources":["../src/Tabs.tsx"],"sourcesContent":["import React, {\r\n  createContext,\r\n  useCallback,\r\n  useContext,\r\n  useEffect,\r\n  useMemo,\r\n  useRef,\r\n  useState,\r\n} from 'react'\r\n\r\nimport { useUID } from 'react-uid'\r\n\r\nenum Direction {\r\n  HORIZONTAL,\r\n  VERTICAL,\r\n}\r\n\r\ninterface TabContextValue {\r\n  id: string\r\n  activeTab: number\r\n  numTabs: number\r\n  setActiveTab(tab: number): void\r\n  direction: Direction\r\n}\r\n\r\nlet TabContext = createContext<TabContextValue>({\r\n  id: 'Please provide a unique id',\r\n  activeTab: 0,\r\n  numTabs: 0,\r\n  setActiveTab: () => {},\r\n  direction: Direction.HORIZONTAL,\r\n})\r\n\r\nexport function useTab(index: number) {\r\n  let { activeTab } = useContext(TabContext)\r\n\r\n  return {\r\n    isActive: activeTab === index,\r\n  }\r\n}\r\n\r\ninterface TabGroupProps {\r\n  initialActiveTab?: number\r\n  numTabs: number\r\n  children: React.ReactNode\r\n  direction?: Direction\r\n}\r\n\r\nexport function TabGroup({\r\n  initialActiveTab = 0,\r\n  numTabs,\r\n  direction = Direction.HORIZONTAL,\r\n  children,\r\n}: TabGroupProps) {\r\n  let id = useUID()\r\n  let [activeTab, setActiveTab] = useState(initialActiveTab)\r\n\r\n  let value = useMemo(\r\n    () => ({ id, activeTab, setActiveTab, numTabs, direction }),\r\n    [activeTab, setActiveTab, numTabs, direction, id]\r\n  )\r\n\r\n  return <TabContext.Provider value={value}>{children}</TabContext.Provider>\r\n}\r\n\r\ninterface TabProps {\r\n  index: number\r\n  className: string\r\n  activeClassName: string\r\n  inactiveClassName: string\r\n  trigger?: 'click' | 'hover' | 'none'\r\n  children?: React.ReactNode\r\n  [key: string]: any\r\n}\r\n\r\nexport function Tab({\r\n  index,\r\n  className,\r\n  activeClassName,\r\n  inactiveClassName,\r\n  trigger = 'click',\r\n  ...props\r\n}: TabProps) {\r\n  let { id, activeTab, setActiveTab } = useContext(TabContext)\r\n  let tabRef = useRef<HTMLButtonElement>()\r\n\r\n  useEffect(() => {\r\n    if (activeTab === index) {\r\n      tabRef.current?.focus({ preventScroll: true })\r\n    }\r\n  }, [activeTab, index])\r\n\r\n  let calculatedClassName = useMemo(() => {\r\n    return [\r\n      className,\r\n      activeTab === index ? activeClassName : inactiveClassName,\r\n    ].join(' ')\r\n  }, [className, activeClassName, inactiveClassName, activeTab, index])\r\n\r\n  let interactionProps = useMemo(() => {\r\n    let interactions: any = {}\r\n\r\n    interactions.onClick = () => setActiveTab(index)\r\n\r\n    if (trigger === 'hover') {\r\n      interactions.onMouseEnter = () => setActiveTab(index)\r\n    }\r\n\r\n    return interactions\r\n  }, [trigger, setActiveTab, index])\r\n\r\n  return (\r\n    <button\r\n      ref={tabRef}\r\n      role=\"tab\"\r\n      aria-controls={`${id}-${index}`}\r\n      aria-selected={activeTab === index}\r\n      tabIndex={activeTab === index ? 0 : -1}\r\n      className={calculatedClassName}\r\n      {...interactionProps}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\ntype HTMLTags = keyof JSX.IntrinsicElements\r\n\r\ninterface TabPanelProps {\r\n  as?: HTMLTags\r\n  index: number\r\n  className: string\r\n  activeClassName: string\r\n  inactiveClassName: string\r\n  children?: React.ReactNode\r\n  [key: string]: any\r\n}\r\n\r\nexport function TabPanel({\r\n  as: Component = 'div',\r\n  index,\r\n  className,\r\n  activeClassName,\r\n  inactiveClassName,\r\n  ...props\r\n}: TabPanelProps) {\r\n  let { id, activeTab } = useContext(TabContext)\r\n\r\n  let calculatedClassName = useMemo(() => {\r\n    return [\r\n      className,\r\n      activeTab === index ? activeClassName : inactiveClassName,\r\n    ].join(' ')\r\n  }, [className, activeClassName, inactiveClassName, activeTab, index])\r\n\r\n  return (\r\n    <Component\r\n      style={{\r\n        ...props.style,\r\n        visibility: activeTab === index ? 'visible' : 'hidden',\r\n      }}\r\n      id={`${id}-${index}`}\r\n      role=\"tabpanel\"\r\n      className={calculatedClassName}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\ninterface TabListProps {\r\n  as?: HTMLTags\r\n  children?: React.ReactNode\r\n  [key: string]: any\r\n}\r\n\r\nexport function TabList({ as: Component = 'div', ...props }: TabListProps) {\r\n  let tabListRef = useRef<any>()\r\n  let { setActiveTab, numTabs, activeTab, direction } = useContext(TabContext)\r\n\r\n  let handleKeyUp = useCallback(\r\n    (e: KeyboardEvent) => {\r\n      let actions: Record<string, () => void> = {\r\n        End: () => {\r\n          setActiveTab(numTabs - 1)\r\n        },\r\n        Home: () => {\r\n          setActiveTab(0)\r\n        },\r\n      }\r\n\r\n      if (direction === Direction.HORIZONTAL) {\r\n        actions.ArrowLeft = () => {\r\n          let previous = activeTab - 1 >= 0 ? activeTab - 1 : numTabs - 1\r\n          setActiveTab(previous)\r\n        }\r\n\r\n        actions.ArrowRight = () => {\r\n          let next = activeTab + 1 < numTabs ? activeTab + 1 : 0\r\n          setActiveTab(next)\r\n        }\r\n      }\r\n\r\n      if (direction === Direction.VERTICAL) {\r\n        actions.ArrowUp = () => {\r\n          let previous = activeTab - 1 >= 0 ? activeTab - 1 : numTabs - 1\r\n          setActiveTab(previous)\r\n        }\r\n\r\n        actions.ArrowDown = () => {\r\n          let next = activeTab + 1 < numTabs ? activeTab + 1 : 0\r\n          setActiveTab(next)\r\n        }\r\n      }\r\n\r\n      let action = actions[e.key]\r\n\r\n      if (action) {\r\n        e.preventDefault()\r\n        action()\r\n      }\r\n    },\r\n    [setActiveTab, activeTab, numTabs, direction]\r\n  )\r\n\r\n  useEffect(() => {\r\n    tabListRef.current.addEventListener('keyup', handleKeyUp)\r\n\r\n    return () => tabListRef.current.removeEventListener('keyup', handleKeyUp)\r\n  }, [handleKeyUp])\r\n\r\n  // @ts-ignore\r\n  return <Component ref={tabListRef} role=\"tablist\" {...props} />\r\n}\r\n\r\nTabGroup.Tab = Tab\r\nTabGroup.TabPanel = TabPanel\r\nTabGroup.TabList = TabList\r\nTabGroup.useTab = useTab\r\n\r\nTabGroup.direction = Direction\r\n"],"names":["Direction","TabContext","createContext","id","activeTab","numTabs","setActiveTab","direction","HORIZONTAL","TabGroup","initialActiveTab","children","useUID","useState","value","useMemo","React","Provider","Tab","index","className","activeClassName","inactiveClassName","trigger","props","useContext","tabRef","useRef","useEffect","current","focus","preventScroll","calculatedClassName","join","interactionProps","interactions","onMouseEnter","ref","role","tabIndex","TabPanel","as","Component","style","visibility","TabList","tabListRef","handleKeyUp","useCallback","e","actions","End","Home","ArrowLeft","ArrowRight","VERTICAL","ArrowUp","ArrowDown","action","key","preventDefault","addEventListener","removeEventListener","useTab","isActive"],"mappings":"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"}